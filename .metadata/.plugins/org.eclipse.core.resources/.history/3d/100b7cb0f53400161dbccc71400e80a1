<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="/struts-tags" prefix="s"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title><s:property value="course.name"/>-作业情况</title>
</head>
<body>
	<s:include value="../student/header.jsp"></s:include>
	<div class="content">
        <div class="left-sidebar">
				<div class="left-title"><span>助教课程</span></div>	
				<hr/>
				<div>
	            <ul class="left-list">
	            	<li><a href="showStudentCourseList.action">所有课程</a></li>
	            </ul>
	            <div class="left-sub-title"><span><s:property value="course.name"/></span></div>
	        	</div>
			</div>
		<div class="right-content">
			<div class="course-header-info">
	        	<div class="course-header-main" id="s-course-header-main">
	        		<span id="course-header-name"><s:property value="course.name"/></span>
	        		<br/>
	        		<span id="course-header-id"><s:property value="course.courseId"/></span>
	        	</div>
	        	<div class="course-header-left" id="s-course-header-left">
	        		<span><img alt="上课时间" src="../../image/cal-white.png" class="cal-img"><s:property value="course.time"/></span>
	        		<br/>
	        		<span><img alt="上课地点" src="../../image/map-white.png" class="map-img"><s:property value="course.location"/></span>
	         		<br/>
	         		<span><img alt="上课教师" src="../../image/tea-white.png" class="tea-img"><s:iterator value="course.teachers" >${ name }  </s:iterator></span>
	                <br/>
	                <span><img alt="上课助教" src="../../image/assi-white.png" class="assi-img"><s:iterator value="%{course.assistant}" >${ name }  </s:iterator></span>
	                <%-- <s:if test="%{course.semester.startTime.after(currentDate)}">
	                	<a href="assistantManagement.action?courseId=<s:property value="course.id"/>" class="add-td-a">管理助教</a>
	                </s:if> --%>
	        	</div>
	                <%-- <span><s:property value="course.semester.name"/></span> --%>
	       </div>
        <div>
        
        <s:if test="%{course.semester.startTime.after(currentDate)}">
        	<div class="t-homework"><span>学期尚未开始，暂无作业</span></div>
        </s:if>
        <s:else>
	        <div class="t-homework">
	        <s:iterator value="homeworkList" >
	        	<a href="toCorrectHomework.action?homeworkId=<s:property value="id"/>&courseId=<s:property value="course.id"/>" class="">
	        		<div class="homework-card">
	        			<!-- 提交中 -->
	        			<s:if test="%{state == 'commit' && studentDDL > currentTime}"> 
			                <div class="homework-card-header h-submit">
			            </s:if>
			            <!-- 批改中 -->
			            <s:elseif test="%{studentDDL < currentTime && assistantDDL > currentTime && state=='commit'}">
			               	<div class="homework-card-header h-commit">
			            </s:elseif>
			            <!-- 教师审批中/已经公布／其它 -->
			            <s:else>
			            	<div class="homework-card-header h-done">
			            </s:else>
	        				<span class="homework-id">No.${ id }</span>
	        				<span class="homework-name">${ name }</span>
	        			</div>
	        			<div class="homework-card-body">
	        				<s:if test="%{description == ''}">
	        					<span>无作业描述</span>
	        				</s:if>
	        				<s:else>
	        					<span class="homework-des">${ description }</span>
	        				</s:else>
	        			</div>
	        			<div class="homework-card-footer">
	        				<hr/>
	        				<s:if test="%{studentDDL > currentTime}">
			                	<span class="homework-undo">距提交截止 xx天xx小时</span>
			            	</s:if>
	        				<s:elseif test="%{studentDDL < currentTime && assistantDDL > currentTime && state=='commit'}">
			               		<span class="homework-active">距批改截止 xx天xx小时</span>
			            	</s:elseif>
			            	<s:elseif test="%{assistantDDL > currentTime && state=='approval'}">
			            		<span class="homework-done">待审批</span>
			                </s:elseif>
			                <s:elseif test="%{state=='pass'}">
			                	<span class="homework-done">已公布</span>
			                </s:elseif>
			                <s:else>
			                	<span class="homework-done">已过期</span>
			                </s:else>
	        				<%-- <span>${ studentDDL }</span><span>${ assistantDDL }</span> --%>
	        			</div>
	        		</div>
	        	</a>
	        </s:iterator>
	        	
	        </div>
        </s:else>
            <%-- <table>
            <thead>
            	<tr>
                    <th>作业编号</th>
                    <th>作业标题</th>
                    <th>作业描述</th>
                    <th>提交格式</th>
                    <th>提交截止时间</th>
                    <th>批改截止时间</th>
                    <th>附件</th>
                    <th>作业情况</th>
                </tr>
            </thead>
            <tfoot>
            	<tr>
            		<td></td>
            		<td></td>
            		<td></td>
            		<td></td>
            		<td></td>
            		<td></td>
            		<td></td>
            		<td></td>
            	</tr>          	
            </tfoot>
            <tbody>
            	<s:iterator value="homeworkList" >
		            <tr>
		                <td class="">${ id }</td>
		                <td>${ name }</td>
		                <td>${ description }</td>
		                <td>${ fileType }</td>
		                <td>${ studentDDL }</td>
		                <td>${ assistantDDL }</td>
		                <td>
		                	<s:if test="%{fileId != 0}">
		                		<a href="downloadAttachment.action?fileId=${ fileId }" class="download-td-a">下载附件</a>
		                	</s:if>
		                	<s:else>
		                		无
		                	</s:else>
		                </td>
		                <td class="homework-state">
		                <s:if test="%{course.semester.startTime.after(currentDate) || course.semester.endTime.before(currentDate)}">
		                	<a href="toCorrectHomework.action?homeworkId=<s:property value="id"/>&courseId=<s:property value="course.id"/>" class="delete-td-a">
		                		查看
		                	</a>
		                </s:if>
		                <s:elseif test="%{ state == 'commit'}">
		                	
		                	<s:if test="%{ studentDDL > currentTime}">
		                		<a href="toCorrectHomework.action?homeworkId=<s:property value="id"/>&courseId=<s:property value="course.id"/>" class="delete-td-a">
		                			提交中
		                		</a>
		                	</s:if>
		                	<s:else>
		                		<a href="toCorrectHomework.action?homeworkId=<s:property value="id"/>&courseId=<s:property value="course.id"/>" class="add-td-a">
		                			批改
		                		</a>
		                	</s:else>
		                </s:elseif>
		               	<s:elseif test="%{ state == 'pass'}">
		               		<a href="toCorrectHomework.action?homeworkId=<s:property value="id"/>&courseId=<s:property value="course.id"/>" class="update-td-a">
		               		已公布</a>
		               	</s:elseif>
		               	<s:elseif test="%{ state == 'approval'}">
		               		<a href="toCorrectHomework.action?homeworkId=<s:property value="id"/>&courseId=<s:property value="course.id"/>" class="delete-td-a">
		               			审批中
		               		</a>
		               	</s:elseif>
		               	<s:else>
		               		<a href="toCorrectHomework.action?homeworkId=<s:property value="id"/>&courseId=<s:property value="course.id"/>" class="update-td-a">
		               		查看</a>
		               	</s:else>
		                </td>
		            </tr>
			</s:iterator>
            </tbody>
            </table> --%>
        </div>
		</div>
    </div>

</body>
</html>